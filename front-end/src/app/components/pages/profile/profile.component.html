

@if (loading) {
  <p>Loading profile...</p>
} @else {
  <div class="public-profile">

    <div class="profile-left">
      <div class="profile-picture">
        <img 
          [src]="profile.profileImage || 'assets/images/icons/profile.svg'" 
          alt="User avatar">
      </div>

      <div class="profile-info">
        <p>{{ profile.displayName }}</p>
        <p>&#64;{{ profile.username }}</p>
        <p><em>{{ profile.bio || 'No bio available' }}</em></p>
      </div>
    
      <button class="btn-follow" *ngIf="!isOwnProfile" (click)="toggleFollow()">
        {{ isFollowing ? 'Unfollow' : 'Follow' }}
      </button>

    </div>

    <div class="profile-right">
      <button class="btn-follow" (click)="openFollowers()">
        <span class="count">{{ profile.followersCount || followers.length }}</span>
        <span class="label">Followers</span>
      </button>

      <button class="btn-follow" (click)="openFollowing()">
        <span class="count">{{ profile.followingCount || following.length }}</span>
        <span class="label">Following</span>
      </button>
    </div>

  </div>

<!-- Followers -->
<div *ngIf="showFollowersModal" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h3>Followers</h3>

    <p *ngIf="loadingFollowers">Loading...</p>
    <p *ngIf="!loadingFollowers && followers.length === 0">No followers yet</p>

    <div class="users-list" *ngIf="!loadingFollowers && followers.length > 0">
      <div class="user-box" *ngFor="let f of followers">
        <img [src]="f.profileImage || 'assets/images/icons/profile.svg'" 
            alt="{{ f.username }} avatar" class="user-avatar">
        <div class="user-info">
          <p class="display-name">{{ f.displayName || f.username }}</p>
          <p class="username">&#64;{{ f.username }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Following -->
<div *ngIf="showFollowingModal" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h3>Following</h3>

    <p *ngIf="loadingFollowing">Loading...</p>
    <p *ngIf="!loadingFollowing && following.length === 0">No following</p>

    <div class="users-list" *ngIf="!loadingFollowing && following.length > 0">
      <div class="user-box" *ngFor="let f of following">
        <img [src]="f.profileImage || 'assets/images/icons/profile.svg'" 
          alt="{{ f.username }} avatar" class="user-avatar">
        <div class="user-info">
          <p class="display-name">{{ f.displayName || f.username }}</p>
          <p class="username">&#64;{{ f.username }}</p>
        </div>
      </div>
    </div>
  </div>
</div>


  }
